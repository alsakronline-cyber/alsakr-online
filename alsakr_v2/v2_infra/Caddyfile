{
    email admin@alsakronline.com
}

app.alsakronline.com {
    # NextAuth API routes must stay on the frontend
    handle /api/auth/* {
        reverse_proxy frontend:3000
    }

    # All other API routes go to the backend
    handle /api/* {
        reverse_proxy backend:8000
    }

    # Everything else (pages, assets) goes to the frontend
    handle {
        reverse_proxy frontend:3000
    }
    encode gzip zstd
}

api.app.alsakronline.com {
    reverse_proxy backend:8000
    encode gzip
}

crm.app.alsakronline.com {
    reverse_proxy pocketbase:8090
    encode gzip
}

workflows.app.alsakronline.com {
    reverse_proxy n8n:5678
    encode gzip
}
