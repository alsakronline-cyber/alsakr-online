{
    email admin@alsakronline.com
}

app.alsakronline.com {
    # NextAuth API routes must stay on the frontend
    handle /api/auth/* {
        reverse_proxy frontend:3000
    }

    # All other API routes go to the backend
    handle /api/* {
        reverse_proxy backend:8000
    }

    # Serve Datasheets and Images from the data volume
    handle /data/* {
        root * /data
        file_server browse
    }

    handle {
        reverse_proxy frontend:3000
    }
    encode gzip zstd
}

api.app.alsakronline.com {
    reverse_proxy backend:8000
    encode gzip
}

# PocketBase CRM - Developer Access Only (SSH Tunnel Required)
# Public access blocked for security
crm.app.alsakronline.com {
    reverse_proxy pocketbase:8090
    encode gzip
}

workflows.app.alsakronline.com {
    reverse_proxy n8n:5678
    encode gzip
}
